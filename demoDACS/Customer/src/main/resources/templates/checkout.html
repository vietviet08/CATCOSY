<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<head th:replace="~{fragments :: head}">
</head>
<link rel="stylesheet" th:href="@{/css/checkout.css}">

<body>

<!--loader-->
<div th:replace="~{fragments :: loader}"></div>


<header th:replace="~{fragments :: header}"></header>


<div class="container py-5 my-5">

    <div class="row">

        <div class="left-page col-12 col-sm-12 col-lg-6 order-lg-1 order-sm-2 order-2">

            <form th:action="@{/process-checkout}" method="post" th:object="${orderInfo}">
                <h4 class="text-center">INFORMATION PAYMENT</h4>
                <div class="information-customer ">
                    <input  class="form-control" name="full-name" type="text" placeholder="Full name" th:value="${customer.getFirstName() + ' ' + customer.getLastName()}" required>

                    <div class="group-email-phone">
                        <div class="email">
                            <input class="form-control" name="email" type="email" placeholder="Email" th:value="${customer.getEmail() != null && !#strings.equals(customer.getEmail(), '') ? customer.getEmail() : null}">
                        </div>
                        <div class="phone">
                            <input class="form-control" name="phone" type="text" placeholder="Phone"  th:value="${customer.getPhone() != null && !#strings.equals(customer.getPhone(), '') ? customer.getPhone() : null}" required>
                        </div>
                    </div>


                    <input th:field="*{deliveryAddress}" class="form-control" name="address" type="text" placeholder="Address"  th:value="${customer.getAddressDetail() != null && !#strings.equals(customer.getAddressDetail(), '') ? customer.getAddressDetail() : null}" required>

                    <div>
                        <select class="form-control form-select form-select-sm mb-3" id="city"
                                aria-label=".form-select-sm" onchange="getDistricts(event)">
                            <option value="" selected>Select province or city</option>
                        </select>

                        <select class=" form-control form-select form-select-sm mb-3" id="district"
                                aria-label=".form-select-sm" onchange="getWards(event)">
                            <option value="" selected>Select district</option>
                        </select>

                        <select class="form-control form-select form-select-sm" id="ward" aria-label=".form-select-sm">
                            <option value="" selected>Select ward and commune</option>
                        </select>
                    </div>

                    <h4 style="margin-top: 40px">PAYMENT METHODS</h4>

                    <div class="pay-methods">
                        <div>
                            <input th:field="*{paymentMethod}" class="pay-method" id="pay-home" name="type-pay" type="radio" th:value="${paymentMethod[0]}" checked required>
                            <label for="pay-home">Pay at home</label>
                        </div>
                        <div>
                            <input th:field="*{paymentMethod}" class="pay-method" id="pay-bank" name="type-pay" type="radio" th:value="${paymentMethod[1]}" required>
                            <label for="pay-bank">Bank transfer</label>
                        </div>
                    </div>
                </div>




                <div class="btn-choose">

                    <div class="back-to-cart">

                        <a th:href="@{/cart}">
                            <i class="fa-solid fa-chevron-left"></i>
                            Back to cart
                        </a>
                    </div>

                    <button class="btn-payment" type="submit" style="border: none">
                        <div class="complete-payment">
                            COMPLETE PAYMENT
                        </div>
                    </button>

                </div>

            </form>

        </div>

        <div class="right-page col-12 col-sm-12 col-lg-6 order-lg-2 order-sm-1 order-1">

            <div class="container">
                <div class="row main-right">
                    <div class="products" th:each="product : ${products}">

                        <div class="img">
                            <a>
                                <img th:src="@{'data:image/jpeg;base64,' + ${product.product.images.get(0).image}}">
                            </a>
                        </div>
                        <div class="inf-product">
                            <p>
                                <a th:href="@{/product-detail/{id} (id = ${product.product.id})}" th:text="${product.product.name}"></a>
                            </p>

                            <p style="color: #858E96" th:text="${product.size.size + ' x' + product.quantity}">

                            </p>

                        </div>
                    </div>




                    <div class="voucher">
                        <input class="form-control" name="voucher" id="voucher" placeholder="Voucher">
                        <label for="voucher"></label>

                        <a href="#">
                            <div class="enter-voucher">
                                Use
                            </div>
                        </a>
                    </div>

                    <hr>

                    <div class="prices">
                        <div class="row-price">
                            <p>Provisional</p>
                            <p class="price price-product" th:text="${cart.totalPrice}"></p>
                        </div>
                        <div class="row-price">
                            <p>Fee ship</p>
                            <p class="fee-ship price-product" >0</p>
                        </div>
                    </div>

                    <hr>

                    <div class="row-price">
                        <p class="title-total-price">Total price</p>
                        <p class="price-product total-price" th:text="${cart.totalPrice}">

                        </p>

                    </div>
                </div>
            </div>

        </div>

    </div>

</div>


<footer th:replace="~{fragments :: footer}"></footer>

<div th:replace="~{fragments :: scroll}"></div>

<div th:replace="~{fragments :: script}"></div>

<div th:replace="~{fragments :: scroll}"></div>

<script th:src="@{/js/checkout.js}"></script>




</body>
</html>